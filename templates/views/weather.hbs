<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"
        integrity="sha512-q3eWabyZPc1XTCmF+8/LuE1ozpg5xxn7iO89yfSOd5/oKvyqLngoNGsx8jq92Y8eXJ/IRxQbEC+FGSYxtk2oiw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Weather App</title>
</head>
<body>
  {{>header}}
  <div style="height:87.5vh;display:grid;text-align:center;place-items:center">
    <div>
      <h3>Enter your City:</h3>
      <form class="d-flex" role="search">
        <input id="cityName" class="form-control me-2" type="search" placeholder="Search City.." aria-label="Search">
        <button id="subBtn" class="btn btn-outline-primary" type="submit">Search</button>
      </form>
      <div style="background:rgb(28 165 255);min-height:17vw;margin:2.5vw 0px;border-radius:1vw">
        <div
          style="display:flex;justify-content:space-between;background:rgb(88, 152, 255);border-radius:1vw 1vw 0 0;padding: 1vw">
          <h5 style="margin:0" id="setDay">Day</h5>
          <h5 style="margin:0" id="setTime">time</h5>
        </div>
        <div id="dataDiv">
          <div style="display:flex;">
            <div style="padding:0.8vw;width:50%;background:#ff0077;">
              <h5 id="dataCity">city</h5>
              <h5 id="dataCountry">country</h5>
            </div>
            <div
              style="padding:5px;background:rgb(0, 217, 18);width:50%;align-items: center;display: grid;">
              <h4 id="mainTemp">Temp</h4>
            </div>
          </div>
          <div style="display:flex;">
            <div
              style="display: grid;align-items: center;padding:5px;background:#6a1a48;color:white;width:50%;">
              <h6 id="minTemp">mintemp</h6>
              <h6 id="maxTemp">maxtemp</h6>
            </div>
            <div style="display: grid;align-items: center;padding:5px;background:rgb(170, 170, 170);width:50%;">
              <h1 id="tempSign"><i class="fas fa-sun" style="color:rgb(234, 255, 0)"></i></h1>
            </div>
          </div>
          <div style="display:flex;align-items:center;">
            <div
              style="display: grid;align-items: center;padding:5px;background:rgb(255, 179, 107);min-height:4vw;width:50%;border-radius:0 0 0 10px;">
              <h6 id="windSpeed">windspeed</h6>
            </div>
            <div style="display: grid;align-items: center;padding:5px;background:rgb(255, 49, 49);min-height:4vw;width:50%;border-radius:0 0 10px">
              <h6 id="humidity">humidity</h6>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  {{>footer}}
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"></script>

  <script>
    var day = 'MON';
    if (new Date().getDay() === 1) { day = ('MON') }
    else if (new Date().getDay() === 2) { day = ('TUE') }
    else if (new Date().getDay() === 3) { day = ('WED') }
    else if (new Date().getDay() === 4) { day = ('THU') }
    else if (new Date().getDay() === 5) { day = ('FRI') }
    else if (new Date().getDay() === 6) { day = ('SAT') }
    else { day = ('SUN') }
    document.getElementById("setDay").innerHTML = day;
    document.getElementById("setTime").innerHTML = new Date().getDate() + "-" + new Date().getMonth() + "-" + new Date().getFullYear();
    //fetch Api
    const submitBtn = document.getElementById("subBtn");
    const cityName = document.getElementById("cityName");
    const getInfo = async (event) => {
      event.preventDefault();
      let cityVal = cityName.value;
      console.log(cityVal);
      if (cityVal === '') {
        alert('invaid Input ..!!')
      } else {
        try {
          let url = `https://api.openweathermap.org/data/2.5/weather?q=${cityVal}&units=metric&appid=3939c9ab613b852a1aa00ee80784899e`;
          const response = await fetch(url);
          const data = await response.json();
          const arrdata = [data];
          console.log(arrdata);
          document.getElementById("dataCity").innerHTML = arrdata[0].name;
          document.getElementById("dataCountry").innerHTML = arrdata[0].sys.country;
          document.getElementById("mainTemp").innerHTML = arrdata[0].main.temp+"°cel";
          document.getElementById("minTemp").innerHTML = "Min Temp:" + arrdata[0].main.temp_min +"°cel";
          document.getElementById("maxTemp").innerHTML = "Max Temp:" + arrdata[0].main.temp_max+"°cel";
          document.getElementById("windSpeed").innerHTML = "Wind Speed:" + arrdata[0].wind.speed+"km/h";
          document.getElementById("humidity").innerHTML = "Humidity:" + arrdata[0].main.humidity+"%";
          var sign = arrdata[0].weather[0].description;
          console.log(sign);
          if (sign == "Sunny") {
            document.getElementById('tempSign').innerHTML = '<i class="fas fa-sun" style="color:rgb(234, 255, 0)"></i>'
          }
          else if (sign == "clouds") {
            document.getElementById('tempSign').innerHTML = '<i class="fas fa-cloud" style="color:#f1f2f6"></i>'
          }
          else if (sign == "rainy") {
            document.getElementById('tempSign').innerHTML = '<i class="fas fa-cloud-rain" style="color:#a4bobe"></i>'
          }
          else {
            document.getElementById('tempSign').innerHTML = '<i class="fas fa-cloud" style="color:#44c3de"></i>'
          }
        }
        catch {
         alert('no such city found..!!')
        }
      }
    }
    submitBtn.addEventListener('click', getInfo);
  </script>
</body>

</html>